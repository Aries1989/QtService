<!-- HTML header for doxygen 1.8.13-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.14"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>QtService: Supported Service Backends</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0" style="display: inline;">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">QtService
   &#160;<span id="projectnumber">1.1.0</span>
   </div>
   <div id="projectbrief">A platform independent library to easily create system services and use some of their features</div>
  </td>
 </tr>
 </tbody>
</table>
<a style="float: right;" target="_blank"  href="https://github.com/Skycoder42/QtService">
<img style="padding: 10px;" src="GitHub_Logo.png"/>
</a>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.14 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">Supported Service Backends </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#qtservice_backends_standard">Standard Backend</a><ul><li class="level2"><a href="#qtservice_backends_standard_backend">Service Backend</a></li>
<li class="level2"><a href="#qtservice_backends_standard_control">Service Control</a></li>
</ul>
</li>
<li class="level1"><a href="#qtservice_backends_systemd">Systemd Backend</a><ul><li class="level2"><a href="#qtservice_backends_systemd_backend">Service Backend</a></li>
<li class="level2"><a href="#qtservice_backends_systemd_control">Service Control</a></li>
</ul>
</li>
<li class="level1"><a href="#qtservice_backends_windows">Windows Backend</a><ul><li class="level2"><a href="#qtservice_backends_windows_backend">Service Backend</a></li>
<li class="level2"><a href="#qtservice_backends_windows_control">Service Control</a></li>
</ul>
</li>
<li class="level1"><a href="#qtservice_backends_launchd">Launchd Backend</a><ul><li class="level2"><a href="#qtservice_backends_launchd_backend">Service Backend</a></li>
<li class="level2"><a href="#qtservice_backends_launchd_control">Service Control</a></li>
</ul>
</li>
<li class="level1"><a href="#qtservice_backends_android">Android Backend</a><ul><li class="level2"><a href="#qtservice_backends_android_backend">Service Backend</a></li>
<li class="level2"><a href="#qtservice_backends_android_control">Service Control</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><p>An overview for the features each backend supports</p>
<h1><a class="anchor" id="qtservice_backends_standard"></a>
Standard Backend</h1>
<h2><a class="anchor" id="qtservice_backends_standard_backend"></a>
Service Backend</h2>
<ul>
<li>Is a dummy that simply runs as a normal console process</li>
<li>Uses <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.11.2/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qcoreapplication.html">QCoreApplication</a> as application</li>
<li>Logging is done formatted to stderr</li>
<li>Ensures only 1 instance is running by using a lockfile</li>
<li>Maps common unix signals to commands:<ul>
<li><code>SIGINT</code>, <code>SIGTERM</code>, <code>SIGQUIT</code>: stop</li>
<li><code>SIGHUB</code>: reload</li>
<li><code>SIGTSTP</code>: pause</li>
<li><code>SIGCONT</code>: resume</li>
<li><code>SIGUSR1</code>: callback "SIGUSR1"</li>
<li><code>SIGUSR2</code>: callback "SIGUSR2"</li>
</ul>
</li>
<li>Can handle windows signals to stop the service: CTRL_C_EVENT, CTRL_BREAK_EVENT</li>
<li>Stopping is only possible via those signals or from within the service itself</li>
<li>Callbacks signatures:<ul>
<li><code>void SIGUSR1()</code>: Invoked by handling the unix signal <code>SIGUSR1</code></li>
<li><code>void SIGUSR2()</code>: Invoked by handling the unix signal <code>SIGUSR2</code> </li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="qtservice_backends_standard_control"></a>
Service Control</h2>
<ul>
<li>Support Flags:<ul>
<li><a class="el" href="class_qt_service_1_1_service_control.html#a0d8ff1b5bd65cd9edeac8c9256f182faa01e6e415ac751b351281b9b2d6927f64" title="Can start services via ServiceControl::start. ">QtService::ServiceControl::SupportsStart</a> (only on platforms that provice <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.11.2/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qprocess.html">QProcess</a>)</li>
<li><a class="el" href="class_qt_service_1_1_service_control.html#a0d8ff1b5bd65cd9edeac8c9256f182faa66de204706111b2111c52f64af7cd382" title="Can stop services via ServiceControl::stop. ">QtService::ServiceControl::SupportsStop</a></li>
<li><a class="el" href="class_qt_service_1_1_service_control.html#a0d8ff1b5bd65cd9edeac8c9256f182faac8b064ab419e077165dfa89ce745a442" title="Can read the current status of a service. ">QtService::ServiceControl::SupportsStatus</a></li>
</ul>
</li>
<li>Custom commands:<ul>
<li><code>qint64 getPid()</code>: Returns the PID auf the currently running instance, or -1 if none is running</li>
</ul>
</li>
<li>Starting is done by simply running the service executable as detached process</li>
<li>The lockfile is used to determine the service state - which means only services that use the backend can be controlled properly</li>
<li>Stopping is done by sending a signal to the service</li>
</ul>
<h1><a class="anchor" id="qtservice_backends_systemd"></a>
Systemd Backend</h1>
<h2><a class="anchor" id="qtservice_backends_systemd_backend"></a>
Service Backend</h2>
<ul>
<li>All <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.11.2/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qdebug.html">QDebug</a> is logged into journald</li>
<li>Uses <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.11.2/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qcoreapplication.html">QCoreApplication</a> as application</li>
<li>Can be used for user and system services</li>
<li>should be used with <code>-platform minimal</code> to avoid any dependencies to the windowing system</li>
<li>supported systemd commands:<ul>
<li>start</li>
<li>stop</li>
<li>reload</li>
</ul>
</li>
<li>Implemented as notify-daemon - automatically reports the status to systemd</li>
<li>Supports the systemd watchdog (optionally)</li>
<li>Supports named and default socket activation (via a .socket file)</li>
<li>Maps common unix signals to commands:<ul>
<li><code>SIGINT</code>, <code>SIGTERM</code>, <code>SIGQUIT</code>: stop</li>
<li><code>SIGHUB</code>: reload</li>
<li><code>SIGTSTP</code>: pause</li>
<li><code>SIGCONT</code>: resume</li>
<li><code>SIGUSR1</code>: callback "SIGUSR1"</li>
<li><code>SIGUSR2</code>: callback "SIGUSR2"</li>
</ul>
</li>
<li>Callbacks signatures:<ul>
<li><code>void SIGUSR1()</code>: Invoked by handling the unix signal <code>SIGUSR1</code></li>
<li><code>void SIGUSR2()</code>: Invoked by handling the unix signal <code>SIGUSR2</code></li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="qtservice_backends_systemd_control"></a>
Service Control</h2>
<ul>
<li>Support Flags:<ul>
<li><a class="el" href="class_qt_service_1_1_service_control.html#a0d8ff1b5bd65cd9edeac8c9256f182faa01e6e415ac751b351281b9b2d6927f64" title="Can start services via ServiceControl::start. ">QtService::ServiceControl::SupportsStart</a></li>
<li><a class="el" href="class_qt_service_1_1_service_control.html#a0d8ff1b5bd65cd9edeac8c9256f182faa66de204706111b2111c52f64af7cd382" title="Can stop services via ServiceControl::stop. ">QtService::ServiceControl::SupportsStop</a></li>
<li><a class="el" href="class_qt_service_1_1_service_control.html#a0d8ff1b5bd65cd9edeac8c9256f182faa2e22c0eeceb35c06d9567723aa0294df" title="Can read the autostart state of a service. ">QtService::ServiceControl::SupportsGetAutostart</a></li>
<li><a class="el" href="class_qt_service_1_1_service_control.html#a0d8ff1b5bd65cd9edeac8c9256f182faa90e093034063a83ac7e814a94c6ade38" title="Can write the autostart state of a service. ">QtService::ServiceControl::SupportsSetAutostart</a></li>
<li><a class="el" href="class_qt_service_1_1_service_control.html#a0d8ff1b5bd65cd9edeac8c9256f182faac8b064ab419e077165dfa89ce745a442" title="Can read the current status of a service. ">QtService::ServiceControl::SupportsStatus</a></li>
<li><a class="el" href="class_qt_service_1_1_service_control.html#a0d8ff1b5bd65cd9edeac8c9256f182faa3b5c5749d73045c3fec50edd8005ac12" title="Supports the execution of specific custom commands. ">QtService::ServiceControl::SupportsCustomCommands</a></li>
<li><a class="el" href="class_qt_service_1_1_service_control.html#a0d8ff1b5bd65cd9edeac8c9256f182faa1d8aecbfecfbb559154e576580b86f44" title="Supports service commands that block for the execution. ">QtService::ServiceControl::SupportsBlocking</a></li>
<li><a class="el" href="class_qt_service_1_1_service_control.html#a0d8ff1b5bd65cd9edeac8c9256f182faa098b3055daa3ec9e4998ee765232da52" title="Supports service commands the only trigger execution without blocking. ">QtService::ServiceControl::SupportsNonBlocking</a></li>
</ul>
</li>
<li>Custom commands:<ul>
<li>Any command that is a valid systemctl command. The general signature is: <code>int command(parameters...)</code> and will invoke systemctl as <code>systemctl [--user|--system] [--no-block] &lt;command&gt; &lt;service-name&gt; &lt;arguments&gt;</code> and return the result of that command. The first two parameters as well as the service name are automatically determined by the backend, depending on the control configuration. For example, to send the <code>SIGUSR1</code> signal to a running service, you would call <code>callCommand&lt;int&gt;("kill", QStringLiteral("--signal=SIGUSR1"));</code></li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="qtservice_backends_windows"></a>
Windows Backend</h1>
<h2><a class="anchor" id="qtservice_backends_windows_backend"></a>
Service Backend</h2>
<ul>
<li>Logging: The service registers as eventsource and reports event to the windows event log</li>
<li>Uses <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.11.2/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qcoreapplication.html">QCoreApplication</a> as application</li>
<li>supported windows commands:<ul>
<li>start</li>
<li>stop</li>
<li>pause</li>
<li>resume</li>
<li>custom commands (callback "command")</li>
</ul>
</li>
<li>Windows service type: <code>SERVICE_WIN32_OWN_PROCESS</code></li>
<li>Windows service flags: <code>SERVICE_ACCEPT_PAUSE_CONTINUE | SERVICE_ACCEPT_STOP | SERVICE_ACCEPT_SHUTDOWN</code></li>
<li>Periodically reports startup state</li>
<li>Callbacks signatures:<ul>
<li><code>void command(DWORD)</code>: Invoke by handling custom service commands (code range is <code>[128;255]</code>)</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="qtservice_backends_windows_control"></a>
Service Control</h2>
<ul>
<li>Support Flags:<ul>
<li><a class="el" href="class_qt_service_1_1_service_control.html#a0d8ff1b5bd65cd9edeac8c9256f182faa01e6e415ac751b351281b9b2d6927f64" title="Can start services via ServiceControl::start. ">QtService::ServiceControl::SupportsStart</a></li>
<li><a class="el" href="class_qt_service_1_1_service_control.html#a0d8ff1b5bd65cd9edeac8c9256f182faa66de204706111b2111c52f64af7cd382" title="Can stop services via ServiceControl::stop. ">QtService::ServiceControl::SupportsStop</a></li>
<li><a class="el" href="class_qt_service_1_1_service_control.html#a0d8ff1b5bd65cd9edeac8c9256f182faa0e05d55ff21f7af167ebeb79843ecb13" title="Can pause services via ServiceControl::pause. ">QtService::ServiceControl::SupportsPause</a></li>
<li><a class="el" href="class_qt_service_1_1_service_control.html#a0d8ff1b5bd65cd9edeac8c9256f182faa56307d8c9dddaa2e2bb016fb5e393ed6" title="Can resume services via ServiceControl::resume. ">QtService::ServiceControl::SupportsResume</a></li>
<li><a class="el" href="class_qt_service_1_1_service_control.html#a0d8ff1b5bd65cd9edeac8c9256f182faa2e22c0eeceb35c06d9567723aa0294df" title="Can read the autostart state of a service. ">QtService::ServiceControl::SupportsGetAutostart</a></li>
<li><a class="el" href="class_qt_service_1_1_service_control.html#a0d8ff1b5bd65cd9edeac8c9256f182faa90e093034063a83ac7e814a94c6ade38" title="Can write the autostart state of a service. ">QtService::ServiceControl::SupportsSetAutostart</a></li>
<li><a class="el" href="class_qt_service_1_1_service_control.html#a0d8ff1b5bd65cd9edeac8c9256f182faac8b064ab419e077165dfa89ce745a442" title="Can read the current status of a service. ">QtService::ServiceControl::SupportsStatus</a></li>
<li><a class="el" href="class_qt_service_1_1_service_control.html#a0d8ff1b5bd65cd9edeac8c9256f182faa3b5c5749d73045c3fec50edd8005ac12" title="Supports the execution of specific custom commands. ">QtService::ServiceControl::SupportsCustomCommands</a></li>
<li><a class="el" href="class_qt_service_1_1_service_control.html#a0d8ff1b5bd65cd9edeac8c9256f182faa098b3055daa3ec9e4998ee765232da52" title="Supports service commands the only trigger execution without blocking. ">QtService::ServiceControl::SupportsNonBlocking</a></li>
</ul>
</li>
<li>Custom commands:<ul>
<li><code>bool command(DWORD cmd)</code>: Accepts commands in the range of <code>[128;255]</code>. The command is sent to the service as custom command</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="qtservice_backends_launchd"></a>
Launchd Backend</h1>
<h2><a class="anchor" id="qtservice_backends_launchd_backend"></a>
Service Backend</h2>
<ul>
<li>All <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.11.2/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qdebug.html">QDebug</a> is logged with syslog</li>
<li>Uses <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.11.2/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qcoreapplication.html">QCoreApplication</a> as application</li>
<li>Supports named socket activation (via the plist files <code>Sockets</code> category)</li>
<li>Maps common unix signals to commands:<ul>
<li><code>SIGINT</code>, <code>SIGTERM</code>, <code>SIGQUIT</code>: stop</li>
<li><code>SIGHUB</code>: reload</li>
<li><code>SIGTSTP</code>: pause</li>
<li><code>SIGCONT</code>: resume</li>
<li><code>SIGUSR1</code>: callback "SIGUSR1"</li>
<li><code>SIGUSR2</code>: callback "SIGUSR2"</li>
</ul>
</li>
<li>Callbacks signatures:<ul>
<li><code>void SIGUSR1()</code>: Invoked by handling the unix signal <code>SIGUSR1</code></li>
<li><code>void SIGUSR2()</code>: Invoked by handling the unix signal <code>SIGUSR2</code></li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="qtservice_backends_launchd_control"></a>
Service Control</h2>
<ul>
<li>Support Flags:<ul>
<li><a class="el" href="class_qt_service_1_1_service_control.html#a0d8ff1b5bd65cd9edeac8c9256f182faa01e6e415ac751b351281b9b2d6927f64" title="Can start services via ServiceControl::start. ">QtService::ServiceControl::SupportsStart</a></li>
<li><a class="el" href="class_qt_service_1_1_service_control.html#a0d8ff1b5bd65cd9edeac8c9256f182faa66de204706111b2111c52f64af7cd382" title="Can stop services via ServiceControl::stop. ">QtService::ServiceControl::SupportsStop</a></li>
<li><a class="el" href="class_qt_service_1_1_service_control.html#a0d8ff1b5bd65cd9edeac8c9256f182faa3b5c5749d73045c3fec50edd8005ac12" title="Supports the execution of specific custom commands. ">QtService::ServiceControl::SupportsCustomCommands</a></li>
<li><a class="el" href="class_qt_service_1_1_service_control.html#a0d8ff1b5bd65cd9edeac8c9256f182faa098b3055daa3ec9e4998ee765232da52" title="Supports service commands the only trigger execution without blocking. ">QtService::ServiceControl::SupportsNonBlocking</a></li>
</ul>
</li>
<li>Custom commands:<ul>
<li>Any command that is a valid launchctl command. The general signature is: <code>int command(parameters...)</code> and will invoke launchctl as <code>launchctl &lt;command&gt; &lt;arguments&gt; &lt;service-name&gt;</code> and return the result of that command. The service name is automatically determined by the backend, depending on the control configuration.</li>
</ul>
</li>
</ul>
<h1><a class="anchor" id="qtservice_backends_android"></a>
Android Backend</h1>
<h2><a class="anchor" id="qtservice_backends_android_backend"></a>
Service Backend</h2>
<ul>
<li>Logging is done to logcat, as usual for <a class="elRef" target="_blank" doxygen="/home/sky/Qt/Docs/Qt-5.11.2/qtcore/qtcore.tags:https://doc.qt.io/qt-5/" href="https://doc.qt.io/qt-5/qt.html">Qt</a> for android</li>
<li>Uses QAndroidService as application</li>
<li>Handles Android service commands:<ul>
<li>"service is started" (either via binding or explicit start): start</li>
<li>stopService (or stopSelf): stop</li>
<li>onStartCommand: callback "onStartCommand"</li>
<li>onBind: callback "onBind"</li>
</ul>
</li>
<li>Callbacks signatures:<ul>
<li><code>int onStartCommand(QAndroidIntent, int, int)</code>: Run in the <em>android thread</em> (!) to react to the corresponding command</li>
<li><code>QAndroidBinder *onBind(QAndroidIntent)</code>: Run in the <em>android thread</em> (!) to react to the corresponding command</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="qtservice_backends_android_control"></a>
Service Control</h2>
<ul>
<li>Support Flags:<ul>
<li><a class="el" href="class_qt_service_1_1_service_control.html#a0d8ff1b5bd65cd9edeac8c9256f182faa01e6e415ac751b351281b9b2d6927f64" title="Can start services via ServiceControl::start. ">QtService::ServiceControl::SupportsStart</a></li>
<li><a class="el" href="class_qt_service_1_1_service_control.html#a0d8ff1b5bd65cd9edeac8c9256f182faa66de204706111b2111c52f64af7cd382" title="Can stop services via ServiceControl::stop. ">QtService::ServiceControl::SupportsStop</a></li>
<li><a class="el" href="class_qt_service_1_1_service_control.html#a0d8ff1b5bd65cd9edeac8c9256f182faa3b5c5749d73045c3fec50edd8005ac12" title="Supports the execution of specific custom commands. ">QtService::ServiceControl::SupportsCustomCommands</a></li>
<li><a class="el" href="class_qt_service_1_1_service_control.html#a0d8ff1b5bd65cd9edeac8c9256f182faa098b3055daa3ec9e4998ee765232da52" title="Supports service commands the only trigger execution without blocking. ">QtService::ServiceControl::SupportsNonBlocking</a></li>
</ul>
</li>
<li>Custom commands:<ul>
<li><code>void startWithIntent(QAndroidIntent)</code>: Starts the service with a custom intent. If the service is already running it is delivered to the running service. The target class is set automatically, so you don't have to set it on your intent.</li>
<li><code>bool bind(QAndroidServiceConnection*, QtAndroid::BindFlags)</code>: Binds to the given service. If it is not already running that will also start the service. The bind status is reported to the QAndroidServiceConnection.</li>
<li><code>void unbind(QAndroidServiceConnection*)</code>: Unbinds the service connected by the given connection. If no other binders are connected and the service was not started explicitly, this will stop the service. </li>
</ul>
</li>
</ul>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Wed Oct 31 2018 12:09:16 for QtService by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.14
</small></address>
</body>
</html>
